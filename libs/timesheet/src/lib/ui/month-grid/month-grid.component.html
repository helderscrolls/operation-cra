<table class="timesheet-table">
  <thead>
    <tr>
      <th>Projects</th>
      @for (day of days; track day) {
      <th>
        {{ day | date : 'EEE dd' }}
      </th>
      }
    </tr>
  </thead>
  <tbody>
    @for (mission of missions$ | async; track mission.id) {
    <tr>
      <td class="project-name">{{ mission.topSecretMissionName }}</td>

      @for(day of days; track day) {
      <td>
        <select (change)="onAgentChange(+mission.id, day, $event)">
          <option [value]="null">None</option>
          @if (timesheetsMap$ | async; as timesheetsMap) {
          <ng-container>
            @for ( agent of agents$ | async; track agent.id) {
            <option
              [value]="agent.id"
              [selected]="
                getAssignedAgent(+mission.id, day, timesheetsMap) === agent.id
              "
            >
              {{ agent.name }}
            </option>
            }
          </ng-container>
          }
        </select>
      </td>
      }
    </tr>
    }
  </tbody>
</table>
